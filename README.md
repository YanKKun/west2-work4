# 存放west2-work4作业的仓库

## 接口文档：

https://apifox.com/apidoc/shared-8d1e7569-af57-46ac-a60f-302e611bf127

若测试管理员接口功能可登录账号：

xiaohei   123456

若测试用户接口功能可登录账号：

xiaoming   1234567

## 技术栈：

springboot，mysql，mybatis，mybatisplus，redis，docker，druid

## 项目结构：

见项目结构图

## 项目功能

- 用户、视频、评论的CRUD，各类内容的查找
- 使用security框架实现了用户登录验证、管理员功能：封禁违规视频、用户、评论
- 使用了对象存储服务来储存视频、用户头像
- 使用了定时任务搭配redis实现了浏览量定时持久化，防止并发访问导致服务器崩溃
- 使用docker部署项目
- 使用redis防止刷访问量，实现了点击量排行、保存所有的历史搜索记录

## 项目问题

- 使用线程池来进行视频上传异步，但异步上传导致临时文件在主线程完成时删除，子路径报错，无法将文件路径保存到数据库
- 对索引的概念不够清晰并没有添加索引
- 使用了全局异常捕获并没有针对异常进行抛出
